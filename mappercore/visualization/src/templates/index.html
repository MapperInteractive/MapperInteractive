<!doctype html>
<head>
  <title>Loading...</title>
  <link rel=stylesheet type=text/css href="{{ url_for('core.styles', filename='styles.css') }}">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <script src="{{ url_for('core.vendors', filename='jquery.min.js') }}"></script>
  <script src="{{ url_for('core.vendors', filename='bootstrap.bundle.min.js') }}"></script>
  {% block head %}{% endblock %}
</head>
<body>
<div id="root" class="container-fluid"></div>

<script src="{{ url_for('core.vendors', filename='require.min.js') }}"></script>
<script defer>
  require.config({
    baseUrl: '/',
    paths: {
      app: 'core/scripts/app',
      d3: 'core/vendors/d3.min',
      jquery: 'core/vendors/jquery.min',
      underscore: 'core/vendors/underscore.min',
      backbone: 'core/vendors/backbone.min',
    }
  });
  (function () {
    var load = requirejs.load;
    requirejs.load = function (context, moduleId, url) {
      if (!(moduleId in context.config.paths)) {
        var modules = moduleId.split('/');
        if (modules.length === 1) {
          modules.unshift('app');
        }
        url = context.config.baseUrl + modules[0] + '/scripts/' + modules.slice(1).join('/') + '.js';
      }
      return load(context, moduleId, url);
    };
  }());
  require(['main']);
</script>

{% if config['DEBUG'] %}
  <script id="__bs_script__">//<![CDATA[
  document.write("<script async src='http://HOST:3000/browser-sync/browser-sync-client.js?v=2.23.6'><\/script>".replace("HOST", location.hostname));
  //]]></script>
  </body>
{% endif %}
